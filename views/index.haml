!!! 5
%html
  %head
    %title How about that Weather?
    = haml :head
    %script{ :src => 'javascript/main.js', :type => 'text/javascript' }
  %body
    #main
      %h1 How about that Weather?
      %h2 
        %form{ :type => "POST", :action => "/" }
          %span &hellip; in
          %input{ :type => :text, :id => "query", :name => "query", 
                  :placeholder => "     location", :value => @query }

      - if !@weather_data.nil?
        %ul
          - @current = ""
          - for datum in @weather_data
            - if @current != datum[:time].strftime(@dateformat)
              %li.day 
                %pre
                  %span= datum[:time].strftime(@dateformat) 
            %li.data
              %canvas{ "data-hour" => datum[:time].strftime("%H") }
              %span.time= datum[:time].strftime("%H:%M") 
              - @cond = datum[:conditions]
              -if !@cond.nil?
                %span.condition= "#{@cond[:coverage]} #{@cond[:intensity]} #{@cond[:weathertype]}"
              %span.temp= datum[:temp]
            - @current = datum[:time].strftime(@dateformat)
      #footer
        :markdown
          Built by Nick Canzoneri, [email](canzoneri.nicholas@gmail.com) or [twitter](https://twitter.com/#!/ac3522).

          Code available on [Github](https://github.com/ac3522/howaboutthatweather). 

          Powered by [NOAA](http://www.weather.gov/forecasts/xml/rest.php).
